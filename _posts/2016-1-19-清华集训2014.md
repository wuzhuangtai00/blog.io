---
layout: post
title: '清华集训2014'
date: 2016-1-14 12:15
comments: true
categories:

---

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

### Day 1 Task 1

首先注意到这样一个性质,对于某个集合{$$S_1,S_2$$},它的异或和是$$S_1,S_2,S_1 ~ xor ~ S_2,0$$

那么对于某个集合{$$S_1 ~ xor ~ S_2,S_2$$},它的异或和是$$S_1 ~ xor ~ S_2,S_2,S_1,0$$

所以集合内xor来xor去是没关系的.

然后也很容易yy出集合内删去一个0是没关系的.

注意对于$$k\geq 3$$,$$a_i \leq 2^{64/k}$$,对它做一种类似消元的做法之后可以只剩下$$64/k$$个元素，直接暴力就行.

对于k=1,直接or起来除以二就行.

接下来要解决的是$$k=2$$

我们要求的是$x^2$的期望，把它按二进制展开就是

$$(\sum w_k 2^{k})^2\\
=(\sum \sum w_i w_j 2^{i+j})$$

我们要计算的就是每一项对答案的贡献.

所以我们只要算出$$w_i w_j$$均等于$$1$$的期望即可.

怎么算呢?我们可以对每个数取与不取按二进制位列方程进行高斯消元，那么方案数就是

$$2^{自由元数}/2^{m}$$

上面这个式子还能顺便证明答案不是.5就是整数

毕克姥爷好神啊...

---

### Day 1 Task 2

之前做过.

---

### Day 1 Task 3

考试的时候敲了60棵线段树,uoj上A了然而lj那被卡常了.

冷静了一下发现可以记一下区间product然后乘下逆元就好。
