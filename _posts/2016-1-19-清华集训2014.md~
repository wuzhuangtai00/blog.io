---
layout: post
title: '清华集训2014'
date: 2016-1-14 12:15
comments: true
categories:

---

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

### Day 1 Task 1

首先注意到这样一个性质,对于某个集合{$$S_1,S_2$$},它的异或和是$$S_1,S_2,S_1 ~ xor ~ S_2,0$$

那么对于某个集合{$$S_1 ~ xor ~ S_2,S_2$$},它的异或和是$$S_1 ~ xor ~ S_2,S_2,S_1,0$$

所以集合内xor来xor去是没关系的.

然后也很容易yy出集合内删去一个0是没关系的.

注意对于$$k\geq 3$$,$$a_i \leq 2^{64/k}$$,对它做一种类似消元的做法之后可以只剩下$$64/k$$个元素，直接暴力就行.

对于k=1,直接or起来除以二就行.

接下来要解决的是$$k=2$$

我们要求的是$$x^2$$的期望，把它按二进制展开就是

$$(\sum_k w_k 2^{k})^2\\
=(\sum_i \sum_j w_i w_j 2^{i+j})$$

我们要计算的就是每一项对答案的贡献.

所以我们只要算出$$w_i w_j$$均等于$$1$$的期望即可.

怎么算呢?我们可以对每个数取与不取按二进制位列方程进行高斯消元，那么方案数就是

$$2^{自由元数}/2^{m}$$

上面这个式子还能顺便证明答案不是.5就是整数

毕克姥爷好神啊...

---

### Day 1 Task 2

之前做过.

---

### Day 1 Task 3

考试的时候敲了60棵线段树,uoj上A了然而lj那被卡常了.

冷静了一下发现可以记一下区间product然后乘下逆元就好。


---

### Day 2 Task　1

插头Dp

先坑着

---

### Day 2 Task 2

考场上写了KD-Tree

花了3h..写了200行+..最后在uoj上A掉了还是蛮开心的.

出题人的解是枚举最后一个点的答案..然后利用last_ans加密来解一个二次方程获得last_ans

好强啊...

---

### Day 2 Task 3

首先介绍稳定婚姻系统

每个男孩对喜欢的女孩有个排序.每个女孩对喜欢的男孩.一个婚姻情况是稳定的当且仅当不存在一个男孩和一个女孩,这个男孩对女孩的喜爱值大于现任配偶,这个女孩对男孩的喜爱值大于现任配偶.

求一个稳定婚姻系统的方法就是不断地让单身汉去追求还没有追求过的女孩子里评价最高的女孩子.一个女孩子被追求后，如果不存在配偶或配偶评价没有被追求的人高，就接受.

回到题目

考虑某种不合法的情况，应该是

![](http://7xoz7t.com1.z0.glb.clouddn.com/TsinghuaDay2Task2.jpg)

就是某一行的一个数是被在下面的前面被选中，并且这一行窝选中的东西是在窝们后面.

那么令行为男孩，数字为女孩.行更喜欢排在自己行前面的数字,数字更喜欢自己排在前面的行.

那么上面那种情况在婚姻系统中就是不稳定的.其他就都是稳定的.所以这个问题与稳定婚姻系统一一对应.

感觉以后遇到一一配对并且要求满足某些条件的就可以使用稳定婚姻系统
